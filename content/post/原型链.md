---
title: "__proto__和prototype"
date: 2019-03-06T10:22:03+08:00
draft: false
tags: ["原型", 'proto', 'prototype']
categories: ["前端基础知识"]
author: "leone"
comment: true
---

## 原型和原型链
显式原型: prototype
隐式原型: __proto__
每一个对象都有 __proto__ 属性, 只有函数才有 prototype 属性
假设现在有以下代码
```
  function A() {
    this.name = 'oo'
  }
  let a = new A()
  // a = { name: 'oo' }
```
当a.name时,首先会在a自身找name,
找不到会一直沿着a.__proto__找,即a.__proto__.name,
再找不到就继续到a.__proto__.__proto__.name,依此类推...这就是原型链
而a.__proto__ 指向其构造函数(constructor)的prototype
因此,可有以下实现
```
  A.prototype.blog = 'leone'
  console.log(a.blog)
  // leone
```
## 扩展
### 继承
这样的话就通过原型链,可以实现继承
```
  function A() {
    this.name = 'A'
    this.blog = 'leone'
  }
  function B() {
    this.name = 'B'
  }
  B.prototype = new A()
  let b = new B()
  console.log(b)
  // b: { name: 'B' }
  // 注意,继承后属性会覆盖
```
这里为什么要这样写? 因为如果要让b能访问b.blog,根据原型链
b自身没有blog属性,所以到b.__prpto__(即B.prototype找),指到一个有blog属性的对象就可以了
### new运算符
new的时候做了三件事
```
  var obj  = {};
  obj.__proto__ = F.prototype;
  F.call(obj);
```
## 参考
[js中__proto__和prototype的区别和关系？](https://www.zhihu.com/question/34183746)

